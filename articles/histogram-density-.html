<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Histogram and Density • ggmulti</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Histogram and Density">
<meta property="og:description" content="ggmulti">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ggmulti</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/glyph.html">Adding glyphs on scatterplot</a>
    </li>
    <li>
      <a href="../articles/highDim.html">High Dimensional Data Visualization</a>
    </li>
    <li>
      <a href="../articles/histogram-density-.html">Histogram and Density</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/great-northern-diver/ggmulti">
    <span class="fas fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="histogram-density-_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Histogram and Density</h1>
                        <h4 class="author">Wayne Oldford and Zehao Xu</h4>
            
            <h4 class="date">2021-05-16</h4>
      
      
      <div class="hidden name"><code>histogram-density-.Rmd</code></div>

    </div>

    
    
<p>Histograms (and bar plots) are common tools to visualize a single variable. The x axis is often used to locate the bins and the y axis is for the counts. Density plots can be considered as the smoothed version of the histogram.</p>
<p>Boxplot is another method to visualize one dimensional data. Five summary statistics can be easily traced on the plot. However, compared with histograms and density plots, boxplot can accommodate two variables, <code>group</code>s (often on the <code>x</code> axis) and <code>y</code>s (on the <code>y</code> axis).</p>
<p>In <code>ggplot2</code>, <code>geom_histogram</code> and <code>geom_density</code> only accept one variable, <code>x</code> or <code>y</code> (swapped). Providing both positions is forbidden. Inspired by the boxplot (<code>geom_boxplot</code> in <code>ggplot2</code>), we create functions <code>geom_histogram_</code>, <code>geom_bar_</code> and <code>geom_density_</code> which can accommodate both variables, just like the <code>geom_boxplot</code>!</p>
<div id="hist-histogram-and-bar-plot" class="section level2">
<h2 class="hasAnchor">
<a href="#hist-histogram-and-bar-plot" class="anchor"></a>Hist (histogram and bar plot)</h2>
<div id="two-dimensional-bar-plot-geom_bar_" class="section level3">
<h3 class="hasAnchor">
<a href="#two-dimensional-bar-plot-geom_bar_" class="anchor"></a>Two dimensional bar plot: <code>geom_bar_</code>
</h3>
<p>Consider the <code>mtcars</code> data set and suppose that we are interested in the relationship of number of gears given the <code>cyl</code> (number of cylinders).</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span><span class="va">mtcars</span>, 
            mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">gear</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="../reference/geom_hist_.html">geom_bar_</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">labs</span><span class="op">(</span>caption <span class="op">=</span> <span class="st">"Figure 1"</span><span class="op">)</span></code></pre></div>
<p><img src="images/histogram-density-/barplot.png" width="70%" style="display: block; margin: auto;"></p>
<p>Though the Figure 1, we can tell that</p>
<ul>
<li>
<p>Compare vertically: given the number of engines, tell the gears</p>
<ul>
<li><p>Most V8 engine cars prefer 3 gear transmission. V8 cars do not use 4 gear transmission</p></li>
<li><p>Most V4 engine cars prefer 4 gears transmission.</p></li>
</ul>
</li>
<li>
<p>Compare horizontally: given the number of gears, tell the engines</p>
<ul>
<li><p>Most 3 gear transmission cars carry a V8 engine.</p></li>
<li><p>Most 4 gear transmission cars carry a V4 engine, then V6 engine, but never V8 engine.</p></li>
<li><p>Five gear transmission cars can carry either a V4, V6 or V8 engine. However, compared with other two transmissions, 5 gear is not a common choice.</p></li>
</ul>
</li>
</ul>
</div>
<div id="two-dimensional-histogram-geom_histogram_" class="section level3">
<h3 class="hasAnchor">
<a href="#two-dimensional-histogram-geom_histogram_" class="anchor"></a>Two dimensional histogram: <code>geom_histogram_</code>
</h3>
<p>Suppose now, we are interested in the distribution of <code>mpg</code> (miles per gallon) with the respect to the <code>cyl</code> (as “x” axis) and <code>gear</code> (as “fill”)</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">g</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span><span class="va">mtcars</span>, 
            mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span>, y <span class="op">=</span> <span class="va">mpg</span>, fill <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">gear</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="../reference/geom_hist_.html">geom_histogram_</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">labs</span><span class="op">(</span>caption <span class="op">=</span> <span class="st">"Figure 2"</span><span class="op">)</span>
<span class="va">g</span></code></pre></div>
<p><img src="images/histogram-density-/histogram.png" width="70%" style="display: block; margin: auto;"></p>
<p>Through the Figure 2, we can easily tell that as the number of cylinders rises, the miles/gallon drops significantly. Moreover, the number of six cylinder cars is much less that the other two in our data. In addition, the transmission of V8 cars is either 3 or 5 (identical to the conclusion we draw before).</p>
</div>
<div id="just-call-geom_hist" class="section level3">
<h3 class="hasAnchor">
<a href="#just-call-geom_hist" class="anchor"></a>Just call <code>geom_hist</code>!</h3>
<p>Function <code>geom_histogram_</code> is often used as one factor is discrete and the other is continuous, while function <code>geom_bar_</code> accommodate two discrete variables. The former one relies on <strong><code>stat = bin_</code></strong> and the latter one is on <strong><code>stat = count_</code></strong>. However, if we turn the factor of interest as numerical in <code>geom_bar_</code>, there would be no difference between the output of a bar plot and a histogram. Hence, function <code>geom_hist</code> is created by simplifying the process. It understands both cases and users can just call <code>geom_hist</code> to create either a bar plot or a histogram.</p>
</div>
</div>
<div id="density" class="section level2">
<h2 class="hasAnchor">
<a href="#density" class="anchor"></a>Density</h2>
<p>We could also draw density plot side by side to better convey the data of interest. With <code>geom_density_</code>, both summaries can be displayed simultaneously in one chart.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">g</span> <span class="op">+</span> 
  <span class="co"># parameter "positive" controls where the summaries face to</span>
  <span class="fu"><a href="../reference/geom_density_.html">geom_density_</a></span><span class="op">(</span>positive <span class="op">=</span> <span class="cn">FALSE</span>, alpha <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">labs</span><span class="op">(</span>caption <span class="op">=</span> <span class="st">"Figure 3"</span><span class="op">)</span></code></pre></div>
<p><img src="images/histogram-density-/histogram_density.png" width="70%" style="display: block; margin: auto;"></p>
<p>Parameter <code>scaleY</code> is often used to set the scales of each density (or bar). The default “data” indicates that the area of each density is proportional to the count of such group.</p>
<table class="table">
<thead><tr class="header">
<th align="left">cyl</th>
<th align="right">count</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">4</td>
<td align="right">11</td>
</tr>
<tr class="even">
<td align="left">6</td>
<td align="right">7</td>
</tr>
<tr class="odd">
<td align="left">8</td>
<td align="right">14</td>
</tr>
</tbody>
</table>
<p>The area of group cylinder 8 is approximately twice as much as the group cylinder 6.</p>
<p>If only one variable is provided in <code><a href="../reference/geom_density_.html">geom_density_()</a></code> (so does <code><a href="../reference/geom_hist_.html">geom_histogram_()</a></code> and <code><a href="../reference/geom_hist_.html">geom_bar_()</a></code>), the original function <code>geom_density()</code> will be executed automatically.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span><span class="va">mtcars</span>, 
       mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">mpg</span>, fill <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="../reference/geom_density_.html">geom_density_</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">labs</span><span class="op">(</span>caption <span class="op">=</span> <span class="st">"Figure 4"</span><span class="op">)</span></code></pre></div>
<p><img src="images/histogram-density-/density_asOne_FALSE.png" width="70%" style="display: block; margin: auto;"></p>
<p>which is identical to call function <code>geom_density()</code>. However, if we take a look at this chart, we can realize that the area for each group is 1. In other words, the whole area is <strong>3</strong> in total. In <code>geom_density_</code>, we have a parameter called <code>asOne</code>. If it is set as <code>TRUE</code>, the sum of the density area is <strong>1</strong> and the area for each group is proportional to its own count.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span><span class="va">mtcars</span>, 
       mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">mpg</span>, fill <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="../reference/geom_density_.html">geom_density_</a></span><span class="op">(</span>as.mix <span class="op">=</span> <span class="cn">TRUE</span>, alpha <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">labs</span><span class="op">(</span>caption <span class="op">=</span> <span class="st">"Figure 5"</span><span class="op">)</span></code></pre></div>
<p><img src="images/histogram-density-/density_asOne_TRUE.png" width="70%" style="display: block; margin: auto;"></p>
</div>
<div id="set-positions" class="section level2">
<h2 class="hasAnchor">
<a href="#set-positions" class="anchor"></a>Set Positions</h2>
<p>Note that when we set <code>position</code> in function <code><a href="../reference/geom_hist_.html">geom_histogram_()</a></code> or <code>geom_density</code>, we should use the underscore case, that is “stack_”, “dodge_” or “dodge2_” (instead of “stack”, “dodge” or “dodge2”).</p>
<div id="position-stack_" class="section level3">
<h3 class="hasAnchor">
<a href="#position-stack_" class="anchor"></a>Position <code>stack_</code>
</h3>
<p>Similar to <code>geom_density</code>, we can stack the density on top of each other by setting <code>position = 'stack_'</code> (default <code>position = 'identity_'</code>)</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span><span class="va">mtcars</span>, 
       mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">am</span><span class="op">)</span>, y <span class="op">=</span> <span class="va">mpg</span>, fill <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="../reference/geom_density_.html">geom_density_</a></span><span class="op">(</span>position <span class="op">=</span> <span class="st">"stack_"</span>,
                adjust <span class="op">=</span> <span class="fl">0.75</span>,
                as.mix <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">labs</span><span class="op">(</span>caption <span class="op">=</span> <span class="st">"Figure 6"</span><span class="op">)</span></code></pre></div>
<p><img src="images/histogram-density-/stack_density.png" width="70%" style="display: block; margin: auto;"></p>
</div>
<div id="position-dodge_dodge2_" class="section level3">
<h3 class="hasAnchor">
<a href="#position-dodge_dodge2_" class="anchor"></a>Position <code>dodge_</code>(<code>dodge2_</code>)</h3>
<p>Dodging preserves the vertical position of an geom while adjusting the horizontal position (the default position of <code>geom_hist_</code>, <code>geom_histogram_</code> and <code>geom_bar_</code> is <code>stack_</code>)</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">ggplot</span><span class="op">(</span><span class="va">mtcars</span>, 
       mapping <span class="op">=</span> <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">am</span><span class="op">)</span>, y <span class="op">=</span> <span class="va">mpg</span>, fill <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="co"># use more general function `geom_hist_`</span>
  <span class="co"># `dodge2` works without a grouping variable in a layer</span>
  <span class="fu"><a href="../reference/geom_hist_.html">geom_hist_</a></span><span class="op">(</span>position <span class="op">=</span> <span class="st">"dodge2_"</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">labs</span><span class="op">(</span>caption <span class="op">=</span> <span class="st">"Figure 7"</span><span class="op">)</span></code></pre></div>
<p><img src="images/histogram-density-/dodge2_histogram.png" width="70%" style="display: block; margin: auto;"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Zehao Xu, R. Wayne Oldford.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
